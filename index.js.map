{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst apiKey = '47996916-063d7568314d3761f2b5e2fb9';\n\nexport async function fetchImages(query, page, perPage) {\n  try {\n    const response = await axios.get('', {\n      params: {\n        key: apiKey,\n        q: query,\n        per_page: perPage,\n        page: page,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Failed to downdload:', error.message);\n  }\n}\n","export function createImageCard(hit) {\n  const card = document.createElement('div');\n  card.classList.add('card');\n\n  const link = document.createElement('a');\n  link.href = hit.largeImageURL;\n  link.classList.add('lightbox-item');\n\n  const image = document.createElement('img');\n  image.src = hit.webformatURL;\n  image.alt = hit.tags;\n\n  link.setAttribute('data-title', hit.tags);\n  link.appendChild(image);\n\n  const cardInfo = document.createElement('div');\n  cardInfo.classList.add('card-info');\n\n  const stats = document.createElement('p');\n  stats.innerHTML = `\n    <span class=\"stat-item\">Likes: ${hit.likes}</span> \n    <span class=\"stat-item\">Views: ${hit.views}</span> \n    <span class=\"stat-item\">Comments: ${hit.comments}</span> \n    <span class=\"stat-item\">Downloads: ${hit.downloads}</span>\n  `;\n\n  cardInfo.appendChild(stats);\n  card.appendChild(link);\n  card.appendChild(cardInfo);\n\n  return card;\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { createImageCard } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const pictureName = document.querySelector('#picture-picker');\n  const searchButton = document.querySelector('#Search-btn');\n  const resultContent = document.querySelector('#results');\n  const fetchLoadMoreBtn = document.querySelector('#Load-more');\n\n  let page = 1;\n  const perPage = 15;\n  let currentQuery = '';\n  let lightbox = null;\n\n  const loadingIndicator = document.createElement('div');\n  loadingIndicator.id = 'loading-indicator';\n  loadingIndicator.classList.add('loading-indicator');\n  loadingIndicator.textContent = 'Loading images, please wait';\n  loadingIndicator.style.display = 'none';\n  document.body.appendChild(loadingIndicator);\n\n  async function search() {\n    const searchedPicture = pictureName.value.trim();\n\n    if (!searchedPicture) {\n      iziToast.error({\n        title: 'Error',\n        message: `Please enter picture description`,\n      });\n      return;\n    }\n\n    loadingIndicator.style.display = 'block';\n    currentQuery = searchedPicture;\n    page = 1;\n    resultContent.innerHTML = '';\n    fetchLoadMoreBtn.style.display = 'none';\n\n    try {\n      const data = await fetchImages(currentQuery, page, perPage);\n\n      if (data.hits.length === 0) {\n        iziToast.info({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n      }\n\n      data.hits.forEach(hit => {\n        const card = createImageCard(hit);\n        resultContent.appendChild(card);\n      });\n\n      if (!lightbox) {\n        lightbox = new SimpleLightbox('.lightbox-item');\n      } else {\n        lightbox.refresh();\n      }\n\n      if (data.totalHits > page * perPage) {\n        fetchLoadMoreBtn.style.display = 'flex';\n      }\n    } catch (error) {\n      iziToast.error({\n        message: error.message || 'Something goes wrong. Please try again!',\n      });\n      console.error('Error', error);\n    } finally {\n      loadingIndicator.style.display = 'none';\n      pictureName.value = '';\n    }\n  }\n\n  async function loadMore() {\n    page += 1;\n\n    try {\n      loadingIndicator.style.display = 'block';\n\n      const data = await fetchImages(currentQuery, page, perPage);\n\n      data.hits.forEach(hit => {\n        const card = createImageCard(hit);\n        resultContent.appendChild(card);\n      });\n\n      lightbox.refresh();\n\n      const galleryCards = document.querySelectorAll('.card');\n      if (galleryCards.length > 0) {\n        const cardHeight = galleryCards[0].getBoundingClientRect().height;\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n\n      if (page * perPage >= data.totalHits) {\n        fetchLoadMoreBtn.style.display = 'none';\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    } catch (error) {\n      iziToast.error({\n        message: error.message || 'Something goes wrong. Please try again!',\n      });\n      console.error('Error:', error);\n    } finally {\n      loadingIndicator.style.display = 'none';\n    }\n  }\n\n  searchButton.addEventListener('click', search);\n  fetchLoadMoreBtn.addEventListener('click', loadMore);\n});\n"],"names":["axios","apiKey","fetchImages","query","page","perPage","error","createImageCard","hit","card","link","image","cardInfo","stats","pictureName","searchButton","resultContent","fetchLoadMoreBtn","currentQuery","lightbox","loadingIndicator","search","searchedPicture","iziToast","data","SimpleLightbox","loadMore","galleryCards","cardHeight"],"mappings":"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"}